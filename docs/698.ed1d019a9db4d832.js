"use strict";(self.webpackChunkproductManagement=self.webpackChunkproductManagement||[]).push([[698],{3698:(Y,p,i)=>{i.r(p),i.d(p,{UserModule:()=>J});var r=i(8256),U=i(4004),m=i(529);let g=(()=>{class e{constructor(t){this.http=t,this.apiUrl="https://api.escuelajs.co/api/v1/users"}getAllUsers(){return this.http.get(this.apiUrl)}getUser(t){return this.http.get(`${this.apiUrl}/${t}`)}newUser(t){return this.http.post(this.apiUrl,t)}editUser(t,n){return this.http.put(`https://api.escuelajs.co/api/v1/users/${t}`,n).pipe((0,U.U)(o=>o))}deleteUser(t){return this.http.delete(`${this.apiUrl}/${t}`)}static#r=this.\u0275fac=function(n){return new(n||e)(r.LFG(m.eN))};static#t=this.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var h=i(9470),l=i(2367),u=i(6895);const v=function(e){return["/admin",e,"edit"]};function _(e,a){if(1&e){const t=r.EpF();r.TgZ(0,"div",2)(1,"div",3)(2,"div"),r._UZ(3,"img",4),r.qZA(),r.TgZ(4,"div",5)(5,"h3"),r._uU(6),r.qZA(),r.TgZ(7,"p"),r._uU(8),r.qZA(),r.TgZ(9,"p"),r._uU(10),r.qZA(),r.TgZ(11,"p"),r._uU(12),r.qZA()()(),r.TgZ(13,"div",6)(14,"button",7),r._uU(15,"Edit"),r.qZA(),r.TgZ(16,"button",8),r.NdJ("click",function(){const c=r.CHM(t).$implicit,d=r.oxw();return r.KtG(d.deleteUser(c.id))}),r._uU(17,"Delete"),r.qZA()()()}if(2&e){const t=a.$implicit;r.xp6(3),r.MGl("alt","",t.name,"'s avatar"),r.Q6J("src",t.avatar,r.LSH),r.xp6(3),r.Oqu(t.name),r.xp6(2),r.hij("Email: ",t.email,""),r.xp6(2),r.hij("ID: ",t.id,""),r.xp6(2),r.hij("Role: ",t.role,""),r.xp6(2),r.Q6J("routerLink",r.VKq(7,v,t.id))}}let x=(()=>{class e{constructor(t){this.userService=t,this.users=[]}ngOnInit(){this.userService.getAllUsers().subscribe(t=>this.users=t)}deleteUser(t){this.userService.deleteUser(t.toString()).subscribe(()=>{this.users=this.users.filter(n=>n.id!==t)})}static#r=this.\u0275fac=function(n){return new(n||e)(r.Y36(g))};static#t=this.\u0275cmp=r.Xpm({type:e,selectors:[["app-user-list"]],decls:6,vars:1,consts:[["routerLink","/admin/form",1,"addButton"],["class","user-card",4,"ngFor","ngForOf"],[1,"user-card"],[1,"user-container"],[1,"user-avatar",3,"src","alt"],[1,"user-info"],[1,"user-actions"],[3,"routerLink"],[3,"click"]],template:function(n,o){1&n&&(r._UZ(0,"app-header"),r.TgZ(1,"h2"),r._uU(2,"Users List"),r.qZA(),r.TgZ(3,"button",0),r._uU(4,"Add New User"),r.qZA(),r.YNc(5,_,18,9,"div",1)),2&n&&(r.xp6(5),r.Q6J("ngForOf",o.users))},dependencies:[h.G,l.rH,u.sg],styles:[".user-card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border:1px solid #ccc;border-radius:10px;padding:15px;margin:15px;background-color:#f9f9f9;box-shadow:0 2px 4px #000}.user-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px #007bff}.user-container[_ngcontent-%COMP%]{display:flex;align-items:center}.user-avatar[_ngcontent-%COMP%]{width:50px;height:75px;border-radius:50%;margin-right:16px}.user-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}button[_ngcontent-%COMP%]{margin-right:10px;padding:10px 15px;border:none;border-radius:5px;background-color:#007bff;color:#fff;cursor:pointer}.addButton[_ngcontent-%COMP%]{margin-left:15px}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:last-child{background-color:#dc3545}button[_ngcontent-%COMP%]:last-child:hover{background-color:#c82333}h2[_ngcontent-%COMP%]{padding:10px}"]})}return e})();var s=i(433),F=i(9509),Z=i(4466),C=i(384);function b(e,a){1&e&&(r.TgZ(0,"p"),r._uU(1," Name is required. "),r.qZA())}function T(e,a){if(1&e&&(r.TgZ(0,"div",8),r.YNc(1,b,2,0,"p",9),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",null==t.UserForm.controls.name.errors?null:t.UserForm.controls.name.errors.required)}}function M(e,a){1&e&&(r.TgZ(0,"p"),r._uU(1," Email is required. "),r.qZA())}function O(e,a){1&e&&(r.TgZ(0,"p"),r._uU(1," Please enter a valid email. "),r.qZA())}function w(e,a){if(1&e&&(r.TgZ(0,"div",8),r.YNc(1,M,2,0,"p",9),r.YNc(2,O,2,0,"p",9),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",null==t.UserForm.controls.email.errors?null:t.UserForm.controls.email.errors.required),r.xp6(1),r.Q6J("ngIf",null==t.UserForm.controls.email.errors?null:t.UserForm.controls.email.errors.email)}}function A(e,a){1&e&&(r.TgZ(0,"p"),r._uU(1," Password is required. "),r.qZA())}function P(e,a){1&e&&(r.TgZ(0,"p"),r._uU(1," Password must be at least 4 characters long. "),r.qZA())}function I(e,a){if(1&e&&(r.TgZ(0,"div",8),r.YNc(1,A,2,0,"p",9),r.YNc(2,P,2,0,"p",9),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",null==t.UserForm.controls.password.errors?null:t.UserForm.controls.password.errors.required),r.xp6(1),r.Q6J("ngIf",null==t.UserForm.controls.password.errors?null:t.UserForm.controls.password.errors.minlength)}}function q(e,a){1&e&&(r.TgZ(0,"p"),r._uU(1," Avatar URL is required. "),r.qZA())}function N(e,a){if(1&e&&(r.TgZ(0,"div",8),r.YNc(1,q,2,0,"p",9),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",null==t.UserForm.controls.avatar.errors?null:t.UserForm.controls.avatar.errors.required)}}let f=(()=>{class e{constructor(t,n,o,c){this.authService=t,this.userService=n,this.router=o,this.route=c,this.isEditMode=!1}ngOnInit(){this.initializeForm(),this.route.params.subscribe(t=>{this.userId=+t.id,this.userId&&(this.isEditMode=!0,this.loadUser())})}initializeForm(){this.UserForm=new s.cw({name:new s.NI("",s.kI.required),email:new s.NI("",[s.kI.required,s.kI.email]),password:new s.NI("",[s.kI.required,s.kI.minLength(4)]),avatar:new s.NI("https://i.imgur.com/LDOO4Qs.jpg",s.kI.required)})}loadUser(){this.userService.getUser(this.userId.toString()).subscribe(t=>{this.UserForm.patchValue({name:t.name,email:t.email,password:"",avatar:t.avatar})})}onSubmit(){if(this.UserForm.valid){const t=this.UserForm.value;if(this.isEditMode)this.userService.editUser(this.userId,t).subscribe(()=>{console.log("User updated successfully!"),this.router.navigate(["/admin/list"])});else{const{name:n,email:o,password:c,avatar:d}=t;this.authService.register(n,o,c,d).subscribe(S=>{console.log("User registered successfully!"),this.router.navigate(["/admin/list"])})}}}static#r=this.\u0275fac=function(n){return new(n||e)(r.Y36(C.e),r.Y36(g),r.Y36(l.F0),r.Y36(l.gz))};static#t=this.\u0275cmp=r.Xpm({type:e,selectors:[["app-user-form"]],decls:17,vars:6,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],["type","text","placeholder","Name","formControlName","name"],["style","color: red",4,"ngIf"],["type","email","placeholder","Email","formControlName","email"],["type","password","placeholder","Password","formControlName","password"],["type","text","placeholder","Avatar URL","formControlName","avatar"],["type","submit"],[2,"color","red"],[4,"ngIf"]],template:function(n,o){1&n&&(r._UZ(0,"app-header"),r.TgZ(1,"div",0)(2,"form",1),r.NdJ("ngSubmit",function(){return o.onSubmit()}),r.TgZ(3,"div"),r._UZ(4,"input",2),r.YNc(5,T,2,1,"div",3),r.qZA(),r.TgZ(6,"div"),r._UZ(7,"input",4),r.YNc(8,w,3,2,"div",3),r.qZA(),r.TgZ(9,"div"),r._UZ(10,"input",5),r.YNc(11,I,3,2,"div",3),r.qZA(),r.TgZ(12,"div"),r._UZ(13,"input",6),r.YNc(14,N,2,1,"div",3),r.qZA(),r.TgZ(15,"button",7),r._uU(16),r.qZA()()()),2&n&&(r.xp6(2),r.Q6J("formGroup",o.UserForm),r.xp6(3),r.Q6J("ngIf",o.UserForm.controls.name.invalid&&o.UserForm.controls.name.touched),r.xp6(3),r.Q6J("ngIf",o.UserForm.controls.email.invalid&&o.UserForm.controls.email.touched),r.xp6(3),r.Q6J("ngIf",(null==o.UserForm.controls.password?null:o.UserForm.controls.password.invalid)&&(null==o.UserForm.controls.password?null:o.UserForm.controls.password.touched)),r.xp6(3),r.Q6J("ngIf",(null==o.UserForm.controls.avatar?null:o.UserForm.controls.avatar.invalid)&&(null==o.UserForm.controls.avatar?null:o.UserForm.controls.avatar.touched)),r.xp6(2),r.hij(" ",o.isEditMode?"Update User":"Create User"," "))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,h.G,u.O5],styles:['.form-container[_ngcontent-%COMP%]{margin-top:100px}form[_ngcontent-%COMP%]{max-width:40%;margin:auto;padding:20px;background-color:#f9f9f9;border-radius:10px;box-shadow:0 0 10px #000;font-family:Arial,sans-serif}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#333}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;margin:10px 0 20px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}form[_ngcontent-%COMP%]   div[style*="color: red"][_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:10px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;cursor:pointer}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#45a049}']})}return e})();const y=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:x,canActivate:[F.u]},{path:"form",component:f},{path:":id/edit",component:f}];let J=(()=>{class e{static#r=this.\u0275fac=function(n){return new(n||e)};static#t=this.\u0275mod=r.oAB({type:e});static#e=this.\u0275inj=r.cJS({imports:[s.u5,s.UX,Z.m,l.Bz.forChild(y),m.JF,u.ez]})}return e})()}}]);