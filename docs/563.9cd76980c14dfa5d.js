"use strict";(self.webpackChunkproductManagement=self.webpackChunkproductManagement||[]).push([[563],{563:(F,l,c)=>{c.r(l),c.d(l,{ProductModule:()=>N});var d=c(6895),t=c(8256),u=c(529),x=c(4004),P=c(262),_=c(2843);let g=(()=>{class e{constructor(o){this.http=o,this.apiUrl="https://api.escuelajs.co/api/v1/products"}getProducts(){return this.http.get(this.apiUrl)}getProductById(o){return this.http.get(`${this.apiUrl}/${o}`)}createProduct(o){return console.log(o),this.http.post("https://api.escuelajs.co/api/v1/products/",o)}updateProduct(o,n){const i=new u.WM({"Content-Type":"application/json"});return this.http.put(`https://api.escuelajs.co/api/v1/products/${o}`,n,{headers:i})}deleteProduct(o){return this.http.delete(`${this.apiUrl}/${o}`)}getCategoryId(){return this.http.get("https://api.escuelajs.co/api/v1/categories/").pipe((0,x.U)(o=>o),(0,P.K)(o=>(console.error("Error fetching categories",o),(0,_._)(o))))}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(u.eN))};static#o=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var C=c(1481),a=c(2367),m=c(9470);function b(e,s){if(1&e&&t._UZ(0,"img",9),2&e){const o=t.oxw().$implicit,n=t.oxw();t.s9C("alt",o.title),t.Q6J("src",n.sanitizeImageUrl(o.images[0]),t.LSH)}}function M(e,s){1&e&&(t.TgZ(0,"div")(1,"p"),t._uU(2,"No products available."),t.qZA()())}const O=function(e){return["/products",e]},v=function(e){return["/products",e,"edit"]};function Z(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",3)(1,"h3"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p")(6,"strong"),t._uU(7,"Price:"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"strong"),t._uU(11,"Category:"),t.qZA(),t._uU(12),t.qZA(),t.YNc(13,b,1,2,"img",4),t.YNc(14,M,3,0,"div",5),t.TgZ(15,"div",6)(16,"button",7),t._uU(17,"Details"),t.qZA(),t.TgZ(18,"button",7),t._uU(19,"Edit"),t.qZA(),t.TgZ(20,"button",8),t.NdJ("click",function(){const f=t.CHM(o).$implicit,z=t.oxw();return t.KtG(z.deleteProduct(f.id))}),t._uU(21,"Delete"),t.qZA()()()}if(2&e){const o=s.$implicit,n=t.oxw();t.xp6(2),t.Oqu(o.title),t.xp6(2),t.Oqu(o.description),t.xp6(4),t.hij(" $",o.price,""),t.xp6(4),t.hij(" ",o.category.name,""),t.xp6(1),t.Q6J("ngIf",o.images.length>0),t.xp6(1),t.Q6J("ngIf",0===n.products.length),t.xp6(2),t.Q6J("routerLink",t.VKq(8,O,o.id)),t.xp6(2),t.Q6J("routerLink",t.VKq(10,v,o.id))}}const y=function(){return["/products/create"]};let U=(()=>{class e{constructor(o,n){this.productService=o,this.sanitizer=n,this.products=[]}ngOnInit(){this.loadProducts()}loadProducts(){this.productService.getProducts().subscribe(o=>{this.products=o})}deleteProduct(o){this.productService.deleteProduct(o).subscribe(()=>{this.products=this.products.filter(n=>n.id!==o)})}sanitizeImageUrl(o){return this.sanitizer.bypassSecurityTrustUrl(o)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(g),t.Y36(C.H7))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-list"]],decls:7,vars:3,consts:[[1,"create-button",3,"routerLink"],[1,"product-list"],["class","product-item",4,"ngFor","ngForOf"],[1,"product-item"],["class","product-image",3,"src","alt",4,"ngIf"],[4,"ngIf"],[1,"actions"],[3,"routerLink"],[3,"click"],[1,"product-image",3,"src","alt"]],template:function(n,i){1&n&&(t._UZ(0,"app-header"),t.TgZ(1,"h2"),t._uU(2,"Products List"),t.qZA(),t.TgZ(3,"a",0),t._uU(4,"Create New Product"),t.qZA(),t.TgZ(5,"div",1),t.YNc(6,Z,22,12,"div",2),t.qZA()),2&n&&(t.xp6(3),t.Q6J("routerLink",t.DdM(2,y)),t.xp6(3),t.Q6J("ngForOf",i.products))},dependencies:[d.sg,d.O5,a.rH,m.G],styles:[".product-list[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;flex-wrap:wrap;gap:20px}.product-item[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:5px;box-shadow:0 2px 4px #000;display:flex;flex-direction:column;gap:5px;width:300px}.product-item[_ngcontent-%COMP%]:hover{box-shadow:0 10px 20px #007bff}.product-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:14px}.product-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#555;line-height:1.4}.product-item[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100%;max-height:200px;object-fit:cover;border-radius:5px}.actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:auto}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:3px;cursor:pointer;transition:background-color .3s ease}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1){background:#007bff;color:#fff}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){background:#ffc107;color:#000}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(3){background:#dc3545;color:#fff}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}h2[_ngcontent-%COMP%]{padding:10px}.create-button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;margin-bottom:20px;margin-left:15px;font-size:16px;color:#000;background-color:#0f4;border:none;border-radius:4px;text-decoration:none;text-align:center;transition:background-color .3s ease}.create-button[_ngcontent-%COMP%]:hover{background-color:#00b315}"]})}return e})();function T(e,s){if(1&e&&t._UZ(0,"img",8),2&e){const o=t.oxw(2);t.s9C("alt",o.product.title),t.Q6J("src",o.product.images[0],t.LSH)}}function I(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",1)(1,"h1"),t._uU(2),t.qZA(),t.TgZ(3,"p",2),t._uU(4),t.qZA(),t.TgZ(5,"p",3),t._uU(6),t.qZA(),t.TgZ(7,"p",4),t._uU(8),t.qZA(),t.YNc(9,T,1,2,"img",5),t.TgZ(10,"p",6),t._uU(11),t.qZA(),t.TgZ(12,"button",7),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.goBack())}),t._uU(13,"Back to List"),t.qZA()()}if(2&e){const o=t.oxw();t.xp6(2),t.Oqu(o.product.title),t.xp6(2),t.Oqu(o.product.description),t.xp6(2),t.hij("Price: $",o.product.price,""),t.xp6(2),t.hij("Category: ",o.product.category.name,""),t.xp6(1),t.Q6J("ngIf",o.product.images.length>0),t.xp6(2),t.Oqu(o.product.content)}}let k=(()=>{class e{constructor(o,n,i){this.route=o,this.productService=n,this.location=i}ngOnInit(){const o=this.route.snapshot.paramMap.get("title");console.log("This is the name",o);const n=Number(this.route.snapshot.paramMap.get("id"));this.productService.getProductById(n).subscribe(i=>{this.product=i})}goBack(){this.location.back()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(a.gz),t.Y36(g),t.Y36(d.Ye))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-details"]],decls:1,vars:1,consts:[["class","product-details",4,"ngIf"],[1,"product-details"],[1,"description"],[1,"price"],[1,"category"],["class","product-image",3,"src","alt",4,"ngIf"],[1,"content"],[3,"click"],[1,"product-image",3,"src","alt"]],template:function(n,i){1&n&&t.YNc(0,I,14,6,"div",0),2&n&&t.Q6J("ngIf",i.product)},dependencies:[d.O5],styles:[".product-details[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:5px;box-shadow:0 2px 4px #000;max-width:80%;margin:20px auto;display:flex;flex-direction:column;gap:15px}.product-details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2.5em;color:#333}.product-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1.2em;color:#555}.product-details[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.2em;color:#333}.product-details[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{font-size:1.1em;color:#777}.product-details[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{margin:auto;width:50%;max-height:20%;object-fit:cover;border-radius:5px}.product-details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:1.2em;color:#333}.product-details[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{font-size:1em;color:#777}.product-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:3px;background:#007bff;color:#fff;cursor:pointer;align-self:flex-start}.product-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#0056b3}p[_ngcontent-%COMP%]{margin:0;padding:0}"]})}return e})();var r=c(433);function A(e,s){if(1&e&&(t.TgZ(0,"option",9),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.name," ")}}let h=(()=>{class e{constructor(o,n,i){this.productService=o,this.router=n,this.route=i,this.isEditMode=!1}ngOnInit(){this.initializeForm(),this.getCategories(),this.route.params.subscribe(o=>{this.productId=+o.id,this.productId&&(this.isEditMode=!0,this.loadProduct())})}initializeForm(){this.addEditProduct=new r.cw({title:new r.NI("",r.kI.required),price:new r.NI("",r.kI.required),description:new r.NI("",r.kI.required),categoryId:new r.NI("",r.kI.required),images:new r.NI(["https://placeimg.com/640/480/any"],r.kI.required)})}loadProduct(){this.productService.getProductById(this.productId).subscribe(o=>{this.addEditProduct.patchValue({title:o.title,price:o.price,description:o.description,categoryId:o.category.id})})}onSubmit(){this.isEditMode?this.productService.updateProduct(this.productId,this.addEditProduct.value).subscribe(()=>{this.router.navigate(["/products/list"])}):this.productService.createProduct(this.addEditProduct.value).subscribe(()=>{this.router.navigate(["/products/list"])})}getCategories(){this.productService.getCategoryId().subscribe(o=>{this.categoryList=o})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(g),t.Y36(a.F0),t.Y36(a.gz))};static#o=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-form"]],decls:22,vars:3,consts:[[1,"form-container"],[3,"formGroup","ngSubmit"],["type","text","formControlName","title","required",""],["type","number","formControlName","price","required",""],["name","message","formControlName","description","required",""],["name","","id","","formControlName","categoryId"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","images","required",""],["type","submit"],[3,"value"]],template:function(n,i){1&n&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t._uU(3," Title "),t._UZ(4,"input",2)(5,"br"),t._uU(6," Price "),t._UZ(7,"input",3)(8,"br"),t._uU(9," Description "),t.TgZ(10,"textarea",4),t._uU(11," "),t.qZA(),t._UZ(12,"br"),t._uU(13," Categories "),t.TgZ(14,"select",5),t.YNc(15,A,2,2,"option",6),t.qZA(),t._UZ(16,"br"),t._uU(17," Images "),t._UZ(18,"input",7)(19,"br"),t.TgZ(20,"button",8),t._uU(21),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("formGroup",i.addEditProduct),t.xp6(13),t.Q6J("ngForOf",i.categoryList),t.xp6(6),t.Oqu(i.isEditMode?"Update Product":"Create Product"))},dependencies:[d.sg,m.G,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.Q7,r.sg,r.u],styles:[".form-container[_ngcontent-%COMP%]{margin-top:50px}form[_ngcontent-%COMP%]{max-width:50%;margin:auto;padding:15px;border:1px solid #ccc;border-radius:10px;background-color:#f9f9f9;box-shadow:0 0 10px #000}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin:10px 0;padding:10px;border:1px solid #ddd;border-radius:5px;box-sizing:border-box}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;height:100px}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;margin:10px 0}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#007bff;border:none;border-radius:5px;color:#fff;font-size:14px;cursor:pointer;transition:background-color .3s ease}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return e})();var p=c(3870),q=c(4466);const w=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:U,canActivate:[p.a]},{path:"create",component:h,canActivate:[p.a]},{path:":id",component:k,canActivate:[p.a]},{path:":id/edit",component:h,canActivate:[p.a]}];let N=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#o=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[d.ez,a.Bz.forChild(w),u.JF,q.m,r.u5,r.UX]})}return e})()}}]);